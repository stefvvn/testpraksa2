@model IEnumerable<Facebook.Entities.PostEntities>
@{
    ViewData["Title"] = "Index";
}
 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Facebook.UI.MVC</title>
    <link rel="stylesheet" href="~/css/magnific-popup.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/page.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/Facebook.UI.MVC.styles.css" asp-append-version="true" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200&display=swap" rel="stylesheet">
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script src="~/js/jquery.magnific-popup.min.js"></script>
    <script src="~/js/site.js"></script>
    <script src="https://kit.fontawesome.com/bd623f34da.js" crossorigin="anonymous"></script>
    

</head>

    <body>

        <nav>
            <div class="nav-left">
                <img src="~/images/fblogo.png" class="logo">
                <ul>
                    <li><img src="~/images/notification.png"></li>
                    <li><img src="~/images/inbox.png"></li>
                    <li><img src="~/images/video.png"></li>
                </ul>
            </div>
            <div class="nav-right">
                    <form asp-controller="PostEntities" asp-action="SearchPosts">
                        <div class="search-box">
                        <input type="text" placeholder="Search" name="query">
                            <label>
                                      <img src="~/images/search.png">
                                      <input type="submit" id="SearchBtn" style="display: none">
                            </label>         
                        </div>
                    </form>
                <div class="nav-user-icon online" onclick="settingsMenuToggle()">
                    <img src="~/images/profile-pic.png" id="userImage3">
                </div>
            </div>
            <!----------settings-menu----------->
            <div class="settings-menu">
                <div id="dark-btn">
                    <span></span>
                </div>

                <div class="settings-menu-inner">
                    <div class="user-profile">
                        <img src="~/images/profile-pic.png" id="userImage2">
                        <div class="">
                            <p id="SettingsSessionName"></p>
                            <a href="#">See your profile</a>
                        </div>
                    </div>
                    <hr>
                    <div class="user-profile">
                        <img src="~/images/feedback.png">
                        <div>
                            <p>Give Feedback</p>
                            <a href="#">Help us to improve the new design</a>
                        </div>
                    </div>
                    <hr>
                    <div class="setting-links">
                        <img src="~/images/setting.png" class="settings-icon">
                        <a href="#">Settings <img src="~/images/arrow.png" 
                        width="10px"></a>
                    </div>
                    <div class="setting-links">
                        <img src="~/images/help.png" class="settings-icon">
                        <a href="#">Help <img src="~/images/arrow.png" 
                        width="10px"></a>
                    </div>
                    <div class="setting-links">
                        <img src="~/images/display.png" class="settings-icon">
                        <a href="#">Display <img src="~/images/arrow.png" 
                        width="10px"></a>
                    </div>
                    <div class="setting-links">
                        <img src="~/images/logout.png" class="settings-icon">
                        <a href="#">Logout <img src="~/images/arrow.png" 
                        width="10px"></a>
                    </div>

                </div>
               
            </div>

        </nav>

        <div class="container">
            <!----------left-sidebar----------->
            <div class="left-sidebar">
                <div class="imp-links">
                    <a href="#"><img src="~/images/news.png">Latest News</a>
                    <a href="#"><img src="~/images/friends.png">Friends</a>
                    <a href="#"><img src="~/images/group.png">Group</a>
                    <a href="#"><img src="~/images/marketplace.png">Marketplace</a>
                    <a href="#"><img src="~/images/watch.png">Watch</a>
                    <a href="#">See More</a>
                </div>
                <div class="shortcut-links">
                    <p>You Shortcuts</p>
                    <a href="#"><img src="~/images/shortcut-1.png">Web Developers</a>
                    <a href="#"><img src="~/images/shortcut-2.png">Web Design</a>
                    <a href="#"><img src="~/images/shortcut-3.png">Full Stack Developer</a>
                </div>

            </div>
            <!----------main-content----------->
            <div class="main-content">

                <div class="story-gallery">
                    <div class="story story1">
                        <img src="~/images/upload.png">
                        <p>Post Story</p>
                    </div>
                    <div class="story story2">
                        <img src="~/images/member-1.png">
                        <p>Marija</p>
                    </div>
                    <div class="story story3">
                        <img src="~/images/member-2.png">
                        <p>Milos</p>
                    </div>
                    <div class="story story4">
                        <img src="~/images/member-3.png">
                        <p>Marina</p>
                    </div>
                    <div class="story story5">
                        <img src="~/images/member-4.png">
                        <p>Dejan Ivanovic</p>
                    </div>
                </div>
            <div class="write-post-container">
                    <div class="user-profile">
                        <img src="~/images/profile-pic.png" id="userImage">
                        <div>
                            <p id="FeedSessionName"></p>
                            <small>Public <i class="fa-solid fa-angle-down"></i></small>
                        </div>
                    </div>

                    <div class="post-input-container">
                        <form enctype="multipart/form-data" method="post" asp-controller="PostEntities" asp-action="CreatePost">
                        <textarea rows="1" placeholder="Title" name="Title" id="TitleBox"></textarea>
                        <textarea rows="1" placeholder="What's on your mind?" name="PostContent" id="ContentBox"></textarea>
                        <div class="add-post-links">
                          <a href="#"><img src="~/images/live-video.png"> Go Live</a>
                          <a href="#"><img src="~/images/feeling.png"> Feeling/Mood</a>
                          <a href="#"><img src="~/images/photo.png">Photo</a>
                         
                                  <label className="btn btn-info btn-lg post-upload-label">
                                  <img src="~/images/upload.png" class="post-upload-button">
                                  <input type="file" id="upload" name="file" style="display: none" />
                                  </label>                            
                                <input type="submit" value="Post" class="post-button" id="PostBtn" name="PostBtn">
                                 </form>
                        </div>
                    </div>
                </div>

                
                @foreach (var item in Model) {
                
                <div class="post-container">
                    <div class="post-row">
                        <div class="user-profile">
                            <img src="~/images/img/user/@item.UserId/@item.User.ImgPath">

                            <div>
                                <p><a asp-controller="AccountUserInfoEntities" asp-action="Details" asp-route-id="@item.UserId">@Html.DisplayFor(modelItem => item.User.FirstName) @Html.DisplayFor(modelItem => item.User.LastName)</a></p>
                                <span><a asp-controller="PostEntities" asp-action="Details" asp-route-id="@item.PostId">@Html.DisplayFor(modelItem => item.DateMade)</a></span>
                            </div>
                        </div>
                        <a href="#"><i class="fas fa-ellipsis-v"></i></a>
                    </div>
                    <h3>@Html.DisplayFor(modelItem => item.Title)</h3>
                    <p class="post-text">@Html.DisplayFor(modelItem => item.Content)</p>
                    <a href="~/images/img/post/@item.PostId/@item.ImgPath" class="image-popup"> <img src="~/images/img/post/@item.PostId/@item.ImgPath" class="post-img"></a>


                    <div class="post-row">
                        <div class="activity-icons">
                           <button type="button" class="like-button" onclick="likeClick(this)" PostId="@item.PostId" PostLikeStatus="@item.LikedByUser"><img src="~/images/like.png" class="LikeImage"><div>@item.PostLikes.Count</div></button>
                           <div><img src="~/images/comments.png">@item.Comments.Count</div>
                           <div><img src="~/images/share.png"></div>
                        </div>
                    </div>
                <div class="comment-container"> 
                    @foreach (var comment in item.Comments)
                    {
                        <div class="comment-body">

                            <div class="comment-user-profile">
                                <img src="~/images/img/user/@Html.DisplayFor(modelItem => comment.User.UserIdNumber)/@Html.DisplayFor(modelItem => comment.User.ImgPath)" class="comment-user-profilepic">
                                <p><a asp-controller="AccountUserInfoEntities" asp-action="Details" asp-route-id="@comment.UserId">@Html.DisplayFor(modelItem => comment.User.FirstName) @Html.DisplayFor(modelItem => comment.User.LastName)</a>
                                <a asp-controller="CommentEntities" asp-action="Details" asp-route-id="@comment.CommentId">@Html.DisplayFor(modelItem => comment.DateMade)</a>
                                </p>
                            </div>
                           <div class="comment-content"> 
                            @Html.DisplayFor(modelItem => comment.Content)<br>
                            <a href="~/images/img/comment/@Html.DisplayFor(modelItem => comment.CommentId)/@Html.DisplayFor(modelItem => comment.ImgPath)" class="image-popup"> <img src="~/images/img/comment/@Html.DisplayFor(modelItem => comment.CommentId)/@Html.DisplayFor(modelItem => comment.ImgPath)" class="comment-picture"></a>
                                </div>
                        <button type="button" class="comment-like-button" onclick="likeCommentClick(this)" CommentId="@comment.CommentId" CommentLikeStatus="@comment.LikedByUser"> <div><img src="~/images/like.png" class="LikeImage"> @Html.DisplayFor(modelItem => comment.CommentLikes.Count)</div></button>
                        </div>
                    }

                         <div class="write-comment-container">
                             <form enctype="multipart/form-data" method="post" asp-controller="PostEntities" asp-action="CreateComment">
                                <div class="comment-input-container">
                                <textarea rows="1" placeholder="Write a comment" name="CommentContent"></textarea>

                                <label className="btn btn-info btn-lg">
                                  <img src="~/images/upload.png" class="comment-upload-button">
                                  <input type="file" id="upload" name="file" style="display: none" />
                                </label>
                               
                                @*<input type="submit" value="Comment" class="comment-button" name="CommentBtn">*@
                                <input type="button" value="Comment" class="comment-button" name="CommentBtn" onclick="commentClick(this)" PostId="@item.PostId">
                             </div>      
                             </form>
                    </div>
                </div>
                </div>
                          }
               <div>
                    <button type="button" class="load-more-button">Load More</button>
               </div>
               </div>
            <!----------right-sidebar----------->
            <div class="right-sidebar">

                <div class="sidebar-title">
                    <h4>Events</h4>
                    <a href="#">See All</a>
                </div>


                <div class="event">
                    <div class="left-event">
                        <h3>18</h3>
                        <span>March</span>
                    </div>
                    <div class="right-event">
                        <h4>Social Media</h4>
                        <p><i class="fa-solid fa-location-dot"></i> Trg Republike</p>
                        <a href="#">More Info</a>
                    </div>
                </div>
                <div class="event">
                    <div class="left-event">
                        <h3>22</h3>
                        <span>June</span>
                    </div>
                    <div class="right-event">
                        <h4>Mobile Marketing</h4>
                        <p><i class="fa-solid fa-location-dot"></i> Trg Republike</p>
                        <a href="#">More Info</a>
                    </div>
                </div>
                <div class="sidebar-title">
                    <h4>Advertisement</h4>
                    <a href="#">Close</a>
                </div>
                <img src="~/images/advertisement.png" class="sidebar-ads">

                <div class="sidebar-title">
                    <h4>Conversation</h4>
                    <a href="#">Hide Chat</a>
                </div>

                <div class="online-list">
                    <div class="online">
                        <img src="~/images/member-1.png">
                    </div>
                    <p>Marija Davidovic</p>
                </div>
                <div class="online-list">
                    <div class="online">
                        <img src="~/images/member-2.png">
                    </div>
                    <p>Milos Milakovic</p>
                </div>
                <div class="online-list">
                    <div class="online">
                        <img src="~/images/member-3.png">
                    </div>
                    <p>Marina Marinkovic</p>
                </div>
               </div>
        </div>

    </body>
</html>